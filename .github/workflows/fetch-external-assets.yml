name: Fetch External Assets

on:
  schedule:
    - cron: "0 */12 * * *" # Every 12 hours
  workflow_dispatch:

jobs:
  fetch-and-save:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Create assets directory
        run: mkdir -p assets

      - name: Fetch Trophies
        run: |
          curl -L "https://github-profile-trophy.vercel.app/?username=Sahitya0805&theme=tokyonight&no-frame=true&margin-w=15&row=1&column=6&title=MultiLanguage,PullRequest,Repositories,Experience,Commits,Followers,Issues" -o assets/trophies.svg

      - name: Fetch Typing SVG 1 (Header)
        run: |
          curl -L "https://readme-typing-svg.demolab.com?font=Digital-7+Mono&color=1E90FF&size=35&center=true&vCenter=true&width=800&lines=üåé+WELCOME+TO+MY+DIGITAL+WORLD+üåé" -o assets/typing_header.svg

      - name: Fetch Typing SVG 2 (Hi)
        run: |
          curl -L "https://readme-typing-svg.demolab.com?font=Digital-7+Mono&color=FFFFFF&size=30&center=true&vCenter=true&width=700&lines=üëã+Hi,+I'm+Sahitya+Singh!" -o assets/typing_hi.svg

      - name: Fetch Typing SVG 3 (Separator)
        run: |
          curl -L "https://readme-typing-svg.demolab.com?font=Digital-7+Mono&color=FFDA03&size=18&center=true&width=1000&lines=‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°‚ö°" -o assets/typing_separator.svg

      - name: Fetch Typing SVG 4 (About Me)
        # Combine multiple lines into one SVG fetch for simplicity if possible, or just fetch the one complex one
        run: |
          curl -L "https://readme-typing-svg.demolab.com?font=Digital-7+Mono&color=00CCFF&size=22&center=true&vCenter=true&width=1000&lines=üíª+Tech+Explorer+|+Open+Source+Contributor...;üè´+1st+Year+Student+at+NST+Bengaluru...;üß©+Exploring+Machine+Learning+and+OpenCV...;‚ö°+Dreaming+in+Algorithms,+Debugging+in+Style..." -o assets/typing_bio.svg

      - name: Fetch GitHub Stats Card
        run: |
          curl -L "https://github-readme-stats.vercel.app/api?username=Sahitya0805&show_icons=true&theme=gotham&hide_border=true&bg_color=000000" -o assets/github_stats.svg

      - name: Fetch Top Langs
        run: |
          curl -L "https://github-readme-stats.vercel.app/api/top-langs/?username=Sahitya0805&layout=compact&theme=gotham&hide_border=true&bg_color=000000" -o assets/top_langs.svg

      - name: Fetch Profile Details
        run: |
          curl -L "https://github-profile-summary-cards.vercel.app/api/cards/profile-details?username=Sahitya0805&theme=github_dark" -o assets/profile_details.svg

      - name: Fetch Productive Time
        run: |
          curl -L "https://github-profile-summary-cards.vercel.app/api/cards/productive-time?username=Sahitya0805&theme=github_dark&utcOffset=8" -o assets/productive_time.svg

      - name: Fetch Repos Per Language
        run: |
          curl -L "https://github-profile-summary-cards.vercel.app/api/cards/repos-per-language?username=Sahitya0805&theme=github_dark" -o assets/repos_per_language.svg

      - name: Fetch Most Commit Language
        run: |
          curl -L "https://github-profile-summary-cards.vercel.app/api/cards/most-commit-language?username=Sahitya0805&theme=github_dark" -o assets/most_commit_language.svg

      - name: Commit and Push
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add assets/
          git commit -m "Update static assets from external sources" || echo "No changes to commit"
          git push
